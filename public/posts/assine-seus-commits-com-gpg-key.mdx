---
title: Assine seus commits com GPG Key
description: Como configurar uma chave GPG e assinar seus commits para que o GitHub adicione o badge de verificado aos seus commits.
slug: assine-seus-commits-com-gpg-key
date: 2023-12-11
image: https://res.cloudinary.com/ddwnioveu/image/upload/v1711596804/large_screensht_23_11_11_09_42_09_0974113a42.png
publishedAt: 2023-12-11
updatedAt: 2023-12-11
category: coding
author: Maurício Witter
---

A sigla GPG refere-se a "GNU Privacy Guard", uma implementação do PGP (Pretty Good Privacy). O GPG é uma ferramenta de criptografia de código aberto que proporciona privacidade e autenticidade nas comunicações digitais. Seu objetivo principal é garantir a confidencialidade das mensagens, a autenticidade dos remetentes e a integridade dos dados transmitidos.

O GPG utiliza um sistema de chaves assimétricas, em que cada usuário possui um par de chaves: uma privada e uma pública. A chave pública é usada para criptografar mensagens, enquanto a chave privada é necessária para descriptografar e assinar digitalmente as mensagens. Isso permite que as partes se comuniquem de forma segura, garantindo que apenas os destinatários autorizados possam acessar o conteúdo da mensagem.

Além disso, o GPG é amplamente utilizado para verificar a autenticidade de arquivos e software, através da criação e verificação de assinaturas digitais. Essas assinaturas ajudam a garantir a origem e a integridade dos dados, sendo uma prática comum em ambientes onde a verificação de autenticidade é crucial, como no desenvolvimento de software.

Podemos usar essa última para assinar nossos commits, afim de garantir que o commit seja seu. O GitHub permite que você registre uma chave pública, então quando você for fazer um commit, vai assinar o commit com sua chave privada, no GitHub, o commit passa por uma verificação, ele usa sua chave pública para validar que foi você que fez o commit.

Então, como fazer isso ? Bem, primeiro precisamos criar nossa chave, então faça o seguinte. No seu terminal baixe o GNU GPG e depois execute o comando abaixo.

```bash
gpg --full-generate-key

# ou
gpg --default-new-key-algo rsa4096 --gen-key
```

Após terminar, você deve receber o ID, mas também pode obtê-lo executando o seguinte comando

```bash
gpg --list-secret-keys --keyid-format=long
```

O **ID** é algo como `6YSSE8K57DCE479894D4AD3B33F4A8C59535F3EDA`, sua abreviação está logo acima onde diz `sec rsa4096/<id>`.

Agora precisamos registrar nossa chave pública no GitHub, para tanto você precisa primeiro obter sua chave pública e pode fazer isso executando o seguinte comando no terminal. Observe que você deve trocar `<id>` pelo ID da sua chave obtida com o comando acima.

```bash
gpg --armor --export <id>
```

Feito isso, deve aparecer um bloco de valores tal como mostra o exemplo abaixo, esses valores aleatórios correspondem a sua chave pública, você deve copiar do início ao fim essa chave.

```bash
-----BEGIN PGP PUBLIC KEY BLOCK-----

........
........
........
-----END PGP PUBLIC KEY BLOCK-----
```

Feito isso, você deve ir na sua conta do GitHub, acessar as configurações e entrar em **[SSH e GPG Keys](https://github.com/settings/gpg/new)**. Clique no botão para criar uma nova chave GPG, dê um nome a ela, cole sua chave pública e salve.

Quase lá!

Agora você já pode assinar nossos commits com o comando `git commit -S -m \"mensagem\"`. Mas podemos, em vez de usar a  flag `-S`, configurar nosso `.gitconfig` para tornar isso padrão. Para fazer isso é só inserir esses comando no terminal.

```bash\ngit config --global commit.gpgSign true # para assinar commits\ngit config --global tag.gpgSign true # para assinar tags\n```

Ou então adicione no seu `.gitconfig`.

```bash
[user]
  signingkey = <id>
[commit]
  gpgSign = true
[tag]
  gpgSign = true
```

Agora é só fazer seus commits e assinar com sua senha que o GitHub vai verificar a assinatura com a chave pública. Para que o GitHub mostre um **badge** de **verified signature** no lado do seu commit, volte ao seu `perfil > configurações > SSH e GPG > Vigilant mode` e ative o **checkbox** que diz \"**Flag unsigned commits as unverified**\". 

Após fazer isso, seus commits terão o seguinte **badge** de verificado por GPG key.

![commits](https://i.imgur.com/jWVpFf0.png)

Ao clicar no **badge**, você pode ver o autor do commit verificado pelo GitHub a partir da sua chave pública.

![commits](https://i.imgur.com/49TllSk.png)

Ah! E para verificar um commit localmente é só rodar o comando.

```bash
git verify-commit <commit-hash>
```